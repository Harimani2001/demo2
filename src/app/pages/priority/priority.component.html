<div class="row">
  <div class="col-sm-12">
    <app-card>
      <form #myform="ngForm">
        <table id="add-table" class="table w-100">
          <tbody>
            <tr>
              <td>
                <div class="row">
                  <div class="col-sm-3">
                    <strong class="strong">Priority<span class="asterisk required">*</span> :</strong>
                  </div>
                  <div class="col-sm-9">
                    <input #priorityName [disabled]="checkName(modal.priorityName)" type="text"
                      [(ngModel)]="modal.priorityName" maxlength="50" #prioName="ngModel" class="form-control"
                      name="priorityName" required placeholder="Priority Name">
                    <div class="messages text-danger"
                      *ngIf="(prioName.valid || submitted) && prioName.errors?.required">
                      Priority Name is required</div>
                  </div>
                </div>
              </td>

              <td>
                <div class="row">
                  <div class="col-sm-3">
                    <strong class="strong">Priority Code<span class="asterisk required">*</span> :</strong>
                  </div>
                  <div class="col-sm-9">
                    <input type="text" [(ngModel)]="modal.priorityCode" maxlength="50" #priorityCode="ngModel"
                      class="form-control" name="priorityCode" placeholder="#123Code" required>
                    <div class="messages text-danger"
                      *ngIf="(priorityCode.valid || submitted) && priorityCode.errors?.required">Priority Code is
                      required</div>
                  </div>
                </div>
              </td>
            </tr>

            <tr>
              <td colspan="2">
                <div class="row">
                  <div class="col-sm-2">
                    <strong class="strong">Priority Color :</strong>
                  </div>
                  <div class="col-sm-10" style="margin-left: -60px;">
                    <input [style.background]=this.modal.priorityColor [(colorPicker)]=this.modal.priorityColor
                      (cpSliderDragEnd)="onEventLog('cpSliderDragEnd', $event)" />
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>

        <div class="form-group row">
          <div class="col-sm-12 text-center">
            <button *ngIf="(this.showButtonFlag && !this.updateFlag && permisionModal.createButtonFlag)"
              class="btn btn-sm btn-success waves-effect waves-light m-r-10" (click)="onsubmit(myform.valid);"
              type='submit'>Save</button>
            <button *ngIf="(this.showButtonFlag && this.updateFlag && permisionModal.updateButtonFlag)"
              class="btn btn-sm btn-success waves-effect waves-light m-r-10" (click)="onsubmit(myform.valid);"
              type='submit'>Update</button>
            <button type='button' (click)="onClickCancel();"
              class="btn btn-sm btn-danger waves-effect waves-light">Cancel</button>
          </div>
        </div>
      </form>
    </app-card>

    <div class="row">
      <div class="col-sm-12">
        <app-card>
          <div class="row">
            <div class="col-xs-12 col-sm-12 col-sm-12 col-md-6"></div>
            <div class="col-xs-12 col-sm-12 col-md-6">
              <div style="text-align: right;">
                <label>Search:
                  <input type="search" [(ngModel)]="filterQuery" (ngModelChange)="this.helper.setPaginator(table)"
                    class="form-control input-sm full-data-search" placeholder="Search name">
                </label>
              </div>
            </div>
          </div>
          <ngx-datatable [scrollbarH]="true" #myTable class="data-table dt-chk"
            [rows]='data | PriorityFilterPipe : filterQuery' [limit]="10" [columnMode]="'force'" [headerHeight]="50"
            [footerHeight]="50" [rowHeight]="'auto'">
            <ngx-datatable-row-detail [rowHeight]="'auto'" #myDetailRow>
            </ngx-datatable-row-detail>
            <ngx-datatable-column style="font-weight: bold;" name="Priority Code">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <strong
                  style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['priorityCode']}}</strong>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Priority Name">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <strong
                  style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['priorityName']}}</strong>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Priority Color">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <strong
                  style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['priorityColor']}}</strong>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Action">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <a *ngIf="permisionModal.updateButtonFlag" container="body" href="javascript:;"
                  (click)="editPriority(row.id);" class="m-r-15 crm-action-edit text-muted text-primary" placement="top"
                  ngbTooltip="Edit">
                  <i class="icofont icofont-edit edit"></i>
                </a>
                <a *ngIf="permisionModal.deleteButtonFlag && checkDefaultPriority(row.priorityName)" container="body"
                  href="javascript:;" class="m-r-15 crm-action-delete text-muted text-danger"
                  (click)="openSuccessCancelSwal(row , row['id'] );" placement="top" ngbTooltip="Delete">
                  <i class="icofont icofont-bin bin"></i>
                </a>
              </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>
        </app-card>
      </div>
    </div>
  </div>
</div>

<div *ngIf="spinnerFlag" class="loading">Loading&#8230;</div>