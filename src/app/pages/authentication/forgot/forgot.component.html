<section >
  <div class="bg-login-img content auth-fluid">
    <div class="bg-login-img-caption row">
      <div class="col-sm-12">
        <div class="login-card card-body auth-body">
          <form class="md-float-material" #forgetPasswordform="ngForm" (keydown)="keyDownFunction($event,forgetPasswordform.valid)">
            
            <div class="auth-box">
              <div class="row m-b-20">
                <div class="col-md-12">
                  <h3 class="text-left">You forgot your Password? </h3>
                  <h3 class="text-left">Don't worry.</h3>
                </div>
              </div>
              <p class="text-inverse b-b-default text-right">Back to <a [routerLink]="['/login']">Login.</a></p>
              <!-- <div class="input-group">
                <input type="text" class="form-control" placeholder="Your Email Address">
                <span class="md-line"></span>
              </div> -->


              <div class="input-group">
                <input type="text" class="form-control" placeholder="Email Address" id="emailId" required [(ngModel)]="model.email"
                name="email"  #email="ngModel"  [pattern]="helper.email_pattern"  (ngModelChange)="this.valadationMessage='';" [readonly]="this.userOrganizations.length > 0">
                <span class="md-line"></span>
              </div>
              <div class="form-group" *ngIf="this.userOrganizations.length > 1">
                <select class="form-control" required name="organization" #organizationModel="ngModel" [(ngModel)]="this.organization">
                <option value="">Select Organization</option>
                <option *ngFor="let org of this.userOrganizations" [value]="org.value">{{org.value}}</option>
              </select>
                <div class="messages text-danger" *ngIf="(organizationModel.touched || submitted) && organizationModel.errors?.required"
                  class="messages text-danger">Organization is required</div>
                <span class="md-line"></span>
              </div>
              <div class="messages text-danger" *ngIf="valadationMessage != ''" >{{valadationMessage}}</div>
              <div class="messages text-danger" *ngIf="(email.touched || submitted) && email?.errors?.required">Email is required</div>
              <div class="messages text-danger" *ngIf="email?.errors?.pattern ">Please enter a valid Email Id</div>
              
              <div class="row">
                <div class="col-md-12">
                  <button *ngIf="this.userOrganizations.length == 0" [disabled]="this.loading" type="button" class="btn btn-primary btn-md btn-block waves-effect text-center m-b-20" (click)="resetPassword(forgetPasswordform.valid)">Reset and send me a new Password &nbsp;<span *ngIf="loading"
                    class="ti-reload rotate-refresh"></span></button>
                  <button *ngIf="this.userOrganizations.length > 1" [disabled]="this.loading" type="button" class="btn btn-primary btn-md btn-block waves-effect text-center m-b-20" (click)="apiCall(false)">Reset and send me a new Password &nbsp;<span *ngIf="loading"
                      class="ti-reload rotate-refresh"></span></button>
                </div>
              </div>
              <hr/>
              
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
