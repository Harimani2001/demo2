<div class="row">
  <div class="col-sm-12">
    <app-card [title]="'Workflow Levels'" [classHeader]="true">

      <div class="alert alert-danger background-danger" *ngIf="lookUpkeyExists">
        <strong>Level Name</strong> Already Exists
      </div>

      <div class="alert alert-danger background-danger" *ngIf="isFieldsFilled">
        <strong>Please enter data for all fields</strong>
      </div>
      <div class="row">
        <div class="col-sm-12 col-xl-4 m-b-30">
          <button type="button" class="btn btn-primary" *ngIf="permissionModal.createButtonFlag" [disabled]="addItemAlreadyclicked"
            (click)="addItemClick()">
            <i class="icofont icofont-plus-circle"></i>Add Item
          </button>
        </div>
        </div>

      <ngx-datatable #mydatatable class="material data-table" [headerHeight]="50" [limit]="10" [columnMode]="'force'" [footerHeight]="50"
        [rowHeight]="'auto'" [rows]="workFlowLevelList">

        <ngx-datatable-column name="Level Name">
          <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
            <span title="Click to edit" (click)="editRow(row.$$index)" *ngIf="!editing[row.$$index ]" placeholder="Please Fill">
              {{row['workFlowLevelName']}}
            </span>
            <input autofocus (keyup)="updateValue($event, 'workFlowLevelName', value, row)" *ngIf="editing[row.$$index ]" type="text" [value]="row['workFlowLevelName']"
             placeholder="Please Fill" class="form-control" />
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="ActiveFlag">
          <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
            <span title="Click to edit" (click)="editRow(row.$$index)" *ngIf="!editing[row.$$index ]">
              {{row['activeFlag']}}
            </span>
            <select *ngIf="editing[row.$$index ]" (change)="updateValue($event, 'activeFlag', value, row)" [value]="row['activeFlag']"
              class="form-control">
              <option value="Y">Yes</option>
              <option value="N">No</option>
            </select>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Action">
          <ng-template let-row="row" ngx-datatable-cell-template>
            <button type="submit" *ngIf="permissionModal.createButtonFlag && row.id == 0 && !lookUpkeyExists" class="btn btn-success" (click)="updateRow(row , row['$$index'] )">
              <i class="icofont icofont-paper-plane"></i>Save</button>
            <button type="submit" *ngIf="permissionModal.updateButtonFlag && row.id != 0 && !lookUpkeyExists" class="btn btn-success" (click)="updateRow(row , row['$$index'] )">
              <i class="icofont icofont-paper-plane"></i>Update</button>
              <button type="submit" *ngIf="this.isCancel && editing[row.$$index ]" class="btn btn-danger" (click)="cancel(row['$$index'])">
                <i class="icofont icofont-paper-plane"></i>Cancel</button>
          </ng-template>
        </ngx-datatable-column>
      </ngx-datatable>
    </app-card>
  </div>
  <div *ngIf="spinnerFlag" class="loading">Loading&#8230;</div>
</div>
