<div *ngIf="!iscreate" class="row">
  <div class="col-sm-12">
    <app-card>
      <div class="col-sm-12" id="float-action">
        <app-card>
          <div class="row">
            <div class="page-header-title col-sm-4">
              <i class="icofont icofont-key-hole bg-c-blue"></i>
              <div class="d-inline">
                <h4>Vendor Master</h4>
                <span>view Vendor Master</span>
              </div>
            </div>
            <div class="col-sm-8 text-right">
              <button *ngIf="permissionModal.createButtonFlag" type="button"
                class="btn btn-sm btn-primary waves-effect waves-light m-r-10" (click)="onClickCreate()"><i
                  class="icofont icofont-plus-circle"></i>Add
              </button>
              <input type="search" [(ngModel)]="filterQuery" (ngModelChange)="this.helper.setPaginator(table)"
                class="form-control input-sm full-data-search" name=search placeholder="Search">
            </div>
          </div>
        </app-card>
      </div>

      <br><br><br>
      <ngx-datatable #myTable class="data-table dt-chk" [rows]='data | VendorMasterFilterPipe : filterQuery'
        [limit]="10" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'">
        <ngx-datatable-column [width]="70" [sortable]="false" [canAutoResize]="false" [draggable]="false"
          [resizeable]="false" name="Sl No.">
          <ng-template let-row="row" ngx-datatable-cell-template>
            <strong>{{row['$$index']+1}}</strong>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column style="font-weight: bold;" name="Code">
          <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
            <strong style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['code']}}</strong>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column style="font-weight: bold;" name="Name">
          <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
            <strong style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['name']}}</strong>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column style="font-weight: bold;" name="Email">
          <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
            <strong style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['email']}}</strong>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column style="font-weight: bold;" name="Web Site">
          <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
            <strong style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['website']}}</strong>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column style="font-weight: bold;" name="Project">
          <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
            <strong style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['projectNames']}}</strong>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column style="font-weight: bold;" name="Updated By">
          <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
            <strong style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['userName']}}</strong>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column style="font-weight: bold;" name="Updated Time">
          <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
            <strong style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-weight: normal;">{{row['displayUpdatedTime']}}</strong>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Action">
          <ng-template let-row="row" ngx-datatable-cell-template>
            <a href="javascript:;" *ngIf="permissionModal.updateButtonFlag" (click)="editVendor(row)"
              class="m-r-15 crm-action-edit text-muted text-primary" placement="top" ngbTooltip="Edit">
              <i class="icofont icofont-edit edit"></i>
            </a>
            <a href="javascript:;" *ngIf="permissionModal.deleteButtonFlag"
              class="m-r-15 crm-action-delete text-muted text-danger"
              (click)="openSuccessCancelSwal(row , row['$$index'] );" placement="top" ngbTooltip="Delete">
              <i class="icofont icofont-bin bin"></i>
            </a>
          </ng-template>
        </ngx-datatable-column>
      </ngx-datatable>
    </app-card>
  </div>
</div>

<div *ngIf="iscreate" class="row">
  <div class="col-sm-12">
    <app-card>
      <div class="col-sm-12" id="float-action">
        <app-card>
          <div class="row col-sm-12">
            <div class="col-sm-6 page-header-title">
              <i class="icofont icofont-key-hole bg-c-blue"></i>
              <div class="d-inline">
                <h4>Vendor Master</h4>
                <span>Add Vendor Master</span>
              </div>
            </div>
            <div class="col-sm-6 text-right">
              <button type="button" *ngIf="isUpdate"
                class="btn btn-sm btn-success waves-effect waves-light m-r-10 m-t-10"
                (click)="onClickSave();">Update</button>
              <button type="button" *ngIf="isSave" class="btn btn-sm btn-success waves-effect waves-light m-r-10 m-t-10"
                (click)="onClickSave();">Save</button>
              <button type="button" class="btn btn-sm btn-danger waves-effect waves-light m-r-10 m-t-10"
                (click)="onClickCancel()">Cancel</button>
            </div>
          </div>
        </app-card>
      </div>

      <br><br><br>
      <form [formGroup]="onVendorMasterForm">
        <table id="add-table" class="table w-100">
          <tbody>
            <tr>
              <td>
                <div class="row">
                  <div class="col-sm-2">
                    <strong class="strong">Code<span class="asterisk required">*</span> :</strong>
                  </div>
                  <div class="col-sm-10">
                    <input #vendorCode type="text" name="code" id="code" class="form-control" placeholder="code"
                      formControlName="code" maxlength="50"/>
                    <div class="messages text-danger" *ngIf="(onVendorMasterForm.get('code').touched || submitted) && onVendorMasterForm.get('code').hasError('required')">{{errorMessages.code}}</div>
                  </div>
                </div>
              </td>

              <td>
                <div class="row">
                  <div class="col-sm-2">
                    <strong class="strong">Name<span class="asterisk required">*</span> :</strong>
                  </div>
                  <div class="col-sm-10">
                    <input type="text" name="masterNames" id="names" class="form-control" placeholder="Name"
                      formControlName="name" maxlength="50"/>
                    <div class="messages text-danger" *ngIf="(onVendorMasterForm.get('name').touched || submitted) && onVendorMasterForm.get('name').hasError('required')">{{errorMessages.name}}</div>
                  </div>
                </div>
              </td>
            </tr>

            <tr>
              <td>
                <div class="row">
                  <div class="col-sm-2">
                    <strong class="strong">Email<span class="asterisk required">*</span> :</strong>
                  </div>
                  <div class="col-sm-10">
                    <input type="text" name="email" id="email" class="form-control" placeholder="ex- abc@abc.com"
                      formControlName="email" maxlength="50" />
                    <div class="messages text-danger" *ngIf="(onVendorMasterForm.get('email').touched || submitted) && onVendorMasterForm.get('email').hasError('required')">{{errorMessages.email}}</div>
                    <div class="messages text-danger" *ngIf="onVendorMasterForm.get('email').errors?.pattern">Please enter a valid Email Id</div>
                  </div>
                </div>
              </td>

              <td>
                <div class="row">
                  <div class="col-sm-2">
                    <strong class="strong">Address :</strong>
                  </div>
                  <div class="col-sm-10">
                    <textarea class="form-control max-textarea" formControlName="address" rows="2"
                      name="Description"></textarea>
                  </div>
                </div>
              </td>
            </tr>

            <tr>
              <td>
                <div class="row">
                  <div class="col-sm-2">
                    <strong class="strong">Website :</strong>
                  </div>
                  <div class="col-sm-10">
                    <input type="text" name="website" id="website" class="form-control" placeholder="web site"
                      formControlName="website" maxlength="50" />
                  </div>
                </div>
              </td>

              <td>
                <div class="row">
                  <div class="col-sm-2">
                    <strong class="strong">Contact no :</strong>
                  </div>
                  <div class="col-sm-10">
                    <input type="text" name="contactNo" id="contactNo" class="form-control" placeholder="Contact Number"
                      formControlName="contactNo" minlength="10" maxlength="10" (keypress)="onlyNumber($event)" />
                    <div class="messages text-danger" *ngIf="onVendorMasterForm.get('contactNo').errors?.pattern">{{errorMessages.number}}</div>
                  </div>
                </div>
              </td>
            </tr>

            <tr>
              <td>
                <div class="row">
                  <div class="col-sm-2">
                    <strong class="strong">Project :</strong>
                  </div>
                  <div class="col-sm-10">
                    <ng-select name="projects" [ngClass]="'ng-select'" [options]="projectList" [multiple]="true"
                      formControlName="projectId"></ng-select>
                  </div>
                </div>
              </td>

              <td>
                <div class="row">
                  <div class="col-sm-2">
                    <strong class="strong">Active Flag :</strong>
                  </div>
                  <div class="col-sm-10">
                    <label class="switch">
                      <input type="checkbox" name="activeFlag" formControlName="active" />
                      <span class="slider round"></span>
                    </label>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </form>
    </app-card>
  </div>
</div>

<div *ngIf="spinnerFlag" class="loading">Loading&#8230;</div>